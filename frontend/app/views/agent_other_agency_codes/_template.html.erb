<% r = @required.values %>

<% define_template "agent_other_agency_codes", jsonmodel_definition(:agent_other_agency_codes) do |form| %>
  <div class="subrecord-form-fields">
    <div class="agent-record-control-container">
      <%= form.label_and_textfield "maintenance_agency",  {:field_opts => {:size => 30, :class => "form-control"} }%>
      <%= form.label_and_select "agency_code_type_enum", 
        [""] + form.possible_options_for("agency_code_type_enum", false), 
        :required => is_required_by_admin?(r, "agent_other_agency_codes", "agency_code_type_enum")%>
    </div>
  </div>
<% end %>

<% define_template "agent_other_agency_code_required", jsonmodel_definition(:agent_other_agency_codes) do |form| %>
  <% field_names = ["maintenance_agency", "agency_code_type_enum"] %>
  <% field_names.each do |field_name| %>
    <% if form.required?(field_name) %>
      <%= form.label_and_readonly field_name %>
    <% else %>
      <%= form.label_and_req_boolean field_name %>
    <% end %>
  <% end %>
<% end %>

